<idea-plugin version="2">
    <id>org.stepik.plugin.union</id>
    <name>Stepik Union</name>
    <version>SNAPSHOT</version>
    <idea-version since-build="162.0"/>
    <vendor email="petr.bogdanov@stepik.org" url="http://www.stepik.org">Stepik</vendor>

    <description><![CDATA[
      Stepik plugin for code challenges on Python and Java.<br>

      To uses this plugin you have to have Stepik account and follow the course.<br>
      <br>
      Optional dependency:<br>
      Python plugin<br>

    ]]></description>

    <depends>com.intellij.modules.lang</depends>
    <depends optional="true">PythonCore</depends>
    <depends optional="true" config-file="idea.xml">com.intellij.modules.java</depends>
    <depends optional="true" config-file="pycharm.xml">com.intellij.modules.python</depends>

    <extensions defaultExtensionNs="com.intellij">
        <treeStructureProvider implementation="org.stepik.plugin.projectView.StepikTreeStructureProvider"/>
        <applicationConfigurable instance="org.stepik.plugin.collective.ui.StepikSettingsConfigurable"/>
        <moduleType id="STEPIK_MODULE_TYPE" implementationClass="org.stepik.plugin.java.project.wizard.StepikModuleType"/>
        <navbar implementation="org.stepik.plugin.projectView.StepikNavBarModelExtension"/>
        <refactoring.moveHandler implementation="org.stepik.plugin.refactoring.move.StepikMoveHandlerDelegate" order="first"/>
        <renamePsiElementProcessor implementation="org.stepik.plugin.refactoring.rename.StepikRenamePsiElementProcessor" order="first"/>
        <refactoring.safeDeleteProcessor implementation="org.stepik.plugin.refactoring.safeDelete.StepikSafeDeleteProcessorDelegate" order="first"/>
    </extensions>

    <extensions defaultExtensionNs="SCore">
        <studyPluginConfigurator implementation="org.stepik.plugin.StepikPluginConfigurator"/>
    </extensions>

    <actions>
        <action id="STEPIK.StepikJavaPostAction" class="org.stepik.plugin.actions.StepikJavaPostAction"/>
        <action id="STEPIK.PreviousTaskAction" class="org.stepik.plugin.actions.StepikPreviousTaskAction"/>
        <action id="STEPIK.NextTaskAction" class="org.stepik.plugin.actions.StepikNextTaskAction"/>
        <action id="STEPIK.DownloadSubmission" class="org.stepik.plugin.actions.DownloadSubmission"/>
        <action id="STEPIK.SwitchLanguage" class="org.stepik.plugin.actions.SwitchLanguage"/>
        <action id="STEPIK.InsertStepikDirectives" class="org.stepik.plugin.actions.InsertStepikDirectives"/>
        <action id="STEPIK.RefreshTaskAction" class="org.stepik.plugin.actions.StepikRefreshTaskFileAction" text="Reset Task File" description="Refresh current task"/>
    </actions>

    <!--______________________ CORE ________________________________________-->

    <project-components>
        <component>
            <implementation-class>com.jetbrains.tmp.learning.StudyProjectComponent</implementation-class>
        </component>
    </project-components>

    <application-components>
        <component>
            <implementation-class>com.jetbrains.tmp.learning.stepik.EduStepikUpdater</implementation-class>
        </component>
    </application-components>

    <extensionPoints>
        <extensionPoint qualifiedName="SCore.studyPluginConfigurator" interface="com.jetbrains.tmp.learning.StudyPluginConfigurator"/>
    </extensionPoints>

    <extensions defaultExtensionNs="com.intellij">
        <projectService serviceInterface="com.intellij.codeInsight.documentation.DocumentationManager" serviceImplementation="com.jetbrains.tmp.learning.StudyDocumentationManager" overrides="true"/>
        <toolWindow id="Task Description" anchor="right" factoryClass="com.jetbrains.tmp.learning.ui.StudyToolWindowFactory" conditionClass="com.jetbrains.tmp.learning.ui.StudyCondition"/>
        <fileEditorProvider implementation="com.jetbrains.tmp.learning.editor.StudyFileEditorProvider"/>
        <projectService serviceImplementation="com.jetbrains.tmp.learning.StudyTaskManager"/>
        <applicationService serviceImplementation="com.jetbrains.tmp.learning.stepik.StepikUpdateSettings"/>
    </extensions>
</idea-plugin>